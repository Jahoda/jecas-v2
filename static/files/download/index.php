<!doctype html>
<meta charset="utf-8">
<title>Archiv</title>
<meta name="robots" content="noindex,nofollow,nosnippet,noarchive">
<meta name="googlebot" content="noindex,nofollow,nosnippet,noarchive">
<style>html{background:#efefef;font:x-small/300% Arial, serif;padding:0;position:relative}body{background:#fff;color:#000;font-size:160%;padding-top:3em;margin:auto;max-width:1280px;width:100%}img{border:0;display:block}:target,.target{outline:4px solid #FFCFA4;background:#FFCFA4}body,h1,h2,h3{font-family:Georgia, "New York CE", utopia, serif;font-weight:normal}h1,h2,h3{text-transform:upperxcase}h1{margin:.5em 0 .2em 0;line-height:120%}h2{margin:1.5em 0 .2em 0}h3{margin:1.5em 0 0 0}h3+p{margin-top:.2em}code,*:after{text-transform:none;font-weight:normal}.header,.button,.sidebar h2,.sidebar a,a.tag,h4,h3,h2,h1,button,.form *,.search,textarea{font-family:"Open Sans", "Lucida Grande", "Segoe UI", "Arial"}.header{position:absolute;top:0;left:0;width:100%;background:#333}.header .inner{max-width:1280px;width:100%;margin:auto;display:block;padding:0px 0;background:#444;position:relative;color:#fff}.header a{color:#fff}.header a:hover{background-color:#0C870F}a{color:#272822;text-decoration:underline}.content a,.footer a,.content a code{text-decoration:none;border-bottom:1px solid #0D6AB7;color:#0D6AB7}.content a:hover,.content a:focus{background-color:green;color:#fff;text-decoration:none}.text a[href^="/"],.text a[href^="/"] code,.text a[href^="#"]{background:#FDF2A8}.live a[href^="/"],.live a[href^="#"]{background:none}.text a[href^="#"]{border-bottom-style:dotted}.text a[href^="http://kod.djpw.cz"]:not(.button){padding-left:20px}.text a[href^="http://kod.djpw.cz"]:not(.button){background:#E0EFFC url("http://kod.djpw.cz/favicon.ico") no-repeat;background-size:1em 100%}.text a[href^="http://diskuse.jakpsatweb.cz"],.text a[href^="http://djpw.cz"]{padding-left:20px;background:#D3FCAB url("http://diskuse.jakpsatweb.cz/favicon.ico") no-repeat;background-size:1em 100%}.text a[href^="https://github.com"],.text a[href^="https://gist.github.com"]{padding-left:20px;background:#efefef url("https://github.com/favicon.ico") no-repeat;background-size:1em 100%}.text a[href^="http://php.net"]{padding-left:20px;background:#E4E4F1 url("http://php.net/favicon.ico") no-repeat;background-size:1em 100%}.text a[href^="http://devdocs.io/"]{padding-left:20px;background:#E4E4F1 url("http://devdocs.io/favicon.ico") no-repeat;background-size:1em 100%}.text img{max-width:100%;box-sizing:border-box}.light-blue .header,.light-blue a:hover,.light-blue a:focus,.light-blue a:hover code,.light-blue a:focus code,.light-blue .text > p a[href^="#"]:hover,.light-blue .text > p a[href^="#"]:focus,.text a[href^="http://kod.djpw.cz"]:not(.button):hover{background-color:#0D6AB7;color:#fff}.light-blue .header .inner{background:#1081DD}.blue .header,.blue a:hover{background-color:#0D5255}.blue .header .inner{background:#127378}.white .header,.white a:hover{background-color:#666}.white .header .inner{background:#999}.green .header,.green a:hover{background-color:#0C870F}.green .header .inner{background:#0EA912}.red .header,.red a:hover{background-color:#A81C34}.red .header .inner{background:#CE2B2F}.yellow .header,.yellow a:hover{background-color:#9F9F00}.yellow .header a{color:#000}.yellow .header .inner{background:#E6E600}hr{border:0;border-top:1px solid #ccc;height:0px;margin:0 1em}.webdesign{background:#272822}.dark body{color:#fff;background:#272822}html.dark{background:#22231F}.meta{font-size:80%;color:gray}.item{overflow:hidden;margin-bottom:2em}.item p{margin:0}.item h3{margin-bottom:0}.item .illustration{float:left;margin-right:1em;width:110px}.item h2{margin-top:0}table{border:1px solid #ccc;margin:.5em 0 1em 0}pre{overflow-x:auto;=overflow-x:scroll;overflow-y:hidden}th,code,pre{background:#efefef}pre code{background:transparent;border:0}pre{padding:0 .3em}code,pre{color:#000;font-size:100%;font-family:Consolas, Courier, monospace}td{padding:.2em}a:hover code{background:transparent;color:#efefef}code b,code i{background:#ccc;border:1px dotted #666}code i{font-style:normal;background:#fff}kbd{display:inline-block;background:#0D6AB7;color:#fff;padding:0 .3em;line-height:100%;border-radius:4px;border:1px solid #1081DD;font-size:100%;font-family:Consolas, Courier, monospace;font-weight:bold}small{font-size:100%;opacity:.5}dl ul{padding-left:.8em}.top{vertical-align:top}.center{text-align:center}table{border-collapse:collapse}td,th{padding:.2em .5em}tr td{border:1px solid #ccc}.help{cursor:help;border-bottom:1px dotted #666}.filter table p,.filter table pre,.filter table dl{display:none}.filter table .top p{display:block;margin:0}button,a.button,input.button,.text a[href^="/"].button{padding:.5em;background:#1081DD;border:1px solid #0D6AB7;color:#fff;cursor:pointer;line-height:120%;text-decoration:none;font-size:80%}button:hover,.button:hover{background:#0D6AB7}button:active,.button:active,button:focus{background:#0E5EAD;border-style:inset}button:focus,.button:focus{border-style:outset}h2[id]:hover:after,h3[id]:hover:after,dt[id]:hover:after{content:"#" attr(id);color:gray;padding-left:.25em}.content{padding:2%}.content img.border{padding:.3em;border:1px solid #ccc;display:block}.content .none{list-style:none}.content dt{font-weight:bold;list-style:square inside;display:list-item;text-transform:uppercase}.content .live,.warn,.soft{background:#8ECCF0;padding:.5em;border:1px solid #619AEF;margin-left:1em}.soft{background:#F3D818;border-color:#D6BC0C}.header a{text-decoration:none;font-weight:bold;line-height:35px;padding:0;display:inline-block}a.homepage,a.rss{margin-left:1%;padding:0 1em;padding-left:30px;background:url("../images/home.png") 7px center no-repeat;=float:left}a.rss{margin-right:1%;float:right;background-image:url("../images/rss.png")}.header a.about{float:right;padding:0 1em}.item{position:relative}blockquote{border-left:5px solid #ccc;margin-left:1em;padding:.5em 1.5em;background:#efefef}blockquote .autor{text-align:right}textarea.wysiwyg{width:100%;height:40em}.notes{border-top:1px solid #ccc;color:#666;list-style:none;padding:.5em;margin:3em 0 0 0}.notes li:before{content:"*) "}.notes li + li:before{content:"**) "}.notes li + li + li:before{content:"***) "}.sidebar{width:30%;float:left}.sidebar h2{margin:1em 0}.main{width:70%;float:right}.tag-list{margin:0 2em 0 0;padding:0;list-style:none}.tag-list li{display:block}.tag-list a{display:block;color:#fff;background:#ccc;padding:.5em .7em;border-color:#fff}a.tag{display:inline-block;padding:0 .3em;border:0;background:#999;color:#fff;line-height:1.4em}.tag-list a:hover,.tag-list a:focus,a.tag:hover,a.tag:focus{opacity:.8}a.tag-html,a.tag-html-tagy{background:#E44D27}a.tag-css,a.tag-css-selektory,a.tag-css-vlastnosti,a.tag-stylovani,a.tag-css-pravidla{background:#0271BB}a.tag-js{background:#FEDA3F;color:#000}a.tag-facebook{background:#3B5998}a.tag-twitter{background:#00ACEE}a.tag-google-plus{background:#D1402D}a.tag-seznam{background:#E7202B;color:#EEEEEE}a.tag-webove-prohlizece{background:#76E7FF;color:#000}a.tag-seo{background:#EE9104}a.tag-hotova-reseni{background:#5EAA11}a.tag-wysiwyg,a.tag-tinymce{background:#DFDFDF;color:#000}a.tag-youtube{background:#AA2A25}a.tag-napady{background:#7957B0}a.tag-webove-animace{background:#DA3F94}a.tag-formulare{background:#1CA680}a.tag-lazy-loading{background:#DF2824}a.tag-produktivita{background:#FF8400}a.tag-knihovny{background:#686868}a.tag-php{background:#9999CC}a.tag-google{background:#4583F0}a.tag-menu{background:#E6C6A6;color:#000}a.tag-obrazky{background:#7CE09F;color:#000}a.tag-mapy{background:#CFF596;color:#000}a.tag-zabezpeceni{background:#62CCC1}a.tag-layout{background:#EEFBBD;color:#546705}a.tag-responsive{background:#3429FA}a.tag-hacky{background:#272822;color:#91E22A}a.tag-tabulky{background:#BE7041}.logo{display:block;width:135px;height:35px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIcAAAAjBAMAAABMRATBAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwNi8yNi8xM6K0vh0AAAAgdEVYdFNvZnR3YXJlAE1hY3JvbWVkaWEgRmlyZXdvcmtzIE1Yu5EqJAAAAdZJREFUeJxjYBgFAwNY30+af5U4pSLOOKWk/v8QIM6Q/f8diFNIjCEsHh1A0IpkIpNrR0eLC0ygSwEmrhIBVBjigmkIY81/CPgAE2fMgopAuMz/N0AYbOuh4gUYhsj8/9teDgJwqbr//7aDRSBcrv8/weHDfP//LbBwuQGGIfP/T0D1Jef/fwnIfL/f/xtANO//n5hBAjXkPXrw1v+/iMxlvL9x/XMQgx/hYQxD/qMbcv9/ADKX/b+BFDgU8LkE3RBmWIBCgd4vBsb9TxnAYXJDgUhDWP7/ReHPB3pO5h9Ijfj7/3+acRkCBQ9ghvxGMfM90CtM58AWsc77//9mAHZDTu8GgwVYDeH5A4pfZWgmiLj//98UoryDYkj+FxRZ5t7//68QYwhywDK+34DqfAbL/5Bkg9cQoIACgsPxT4EBDcT//0zYkPn/FyA4dj/QzQAmOmQfQgw5/z8BVZHM/1+IsmT/RQZ0UP//IYYh8f9fOKEoYtz//2UKkDYBZnlW5NTrAsp4JjWoWQtiCMt+9KKAFSbiwMD2C6GcBSr6bxKSGUzv/4PzNFM6SjoBucV9NkigXICBCcmRTOWrQaLtDgih6N3n/2MGGokg+vzp5QqUGjIKhjUAADNkFiqIw6ikAAAAAElFTkSuQmCC");position:absolute;left:50%;bottom:0;margin-left:-67px}.user{position:absolute;right:10px;top:-8px}.footer{color:gray;padding:1em}#ajax-spinner{background:white url('../lighterbox2/load.html') no-repeat 50% 50%;font-size:0;margin:15px 0 0 15px;padding:13px;z-index:123456}div.flash{background:#FFF9D7;border:1px solid #E2C822;color:black;margin:1em 0;padding:1em}.no-js{display:none}.js .no-js{display:block}.com-open{font-size:140%;text-align:center;margin-top:2em;background:#efefef;border:1px solid #ccc;padding:1em;display:inline-block}.com-open{height:3em;transition:all 1s}.com-open.hidden{height:.5em;padding-top:.3em;overflow:hidden}.com-open button{opacity:1;transition:opacity .8s}.com-open.hidden button{opacity:0}.yt{background:#000 center 65%}.yt,.yt a{width:640px;height:385px;display:block;border:0}.yt a{background:transparent url("../images/yt-control.png") left bottom no-repeat;position:relative;text-decoration:none;color:#fff}.yt a span{display:block;width:96%;position:absolute;top:0;left:0;background:#000;color:#fff;font:.8em Arial;color:#fff;padding:1.2% 2%;opacity:.75}.yt a:hover{background-color:transparent}.yt iframe{border:0}.col{float:left}.right{float:right}.left{float:left}.span2{overflow:hidden}.span2 .col{width:49%}.clear{overflow:hidden}img.inline{display:inline-block}.scroll{overflow:auto}.js .tldr .tldr{display:none}.search{display:none;width:300px}.js .search{display:block}.search{color:#fff;background:#0D6AB7;padding:.5em;text-align:center}.search *{display:inline-block;box-sizing:border-box}.search input{width:50%}.search label{width:20%}.search button{width:25%}fieldset{border-color:#fff;border-style:solid}.hide{display:none}.hp-header{overflow:hidden}.hp-header .search{float:right}.hp-header h1,.hp-header .slogan{display:inline-block;=display:inline;zoom:1}.hp-header h1{padding-right:1em}.live{position:relative;overflow:visible}.live .xmp{position:absolute;top:-10000em;left:-1000em;opacity:0;transition:.5s opacity;z-index:20}.show-source .xmp{position:static;display:block;opacity:1;margin:-0.5em;margin-top:1em}.live .hide-source,.show-source .show-source{display:none}.show-source .hide-source{display:inline}.live .show-source .mobile,.live .hide-source .mobile{display:none}.view-source{position:absolute;right:0;top:0;margin:0;z-index:20}.share-buttons{margin-top:3em;border-top:1px solid #ccc}.share-buttons a{display:inline-block;width:100px;text-align:center;padding:.5em;color:#fff;text-decoration:none;border:0}.share-buttons .fb-like{background:#4B67A1}.share-buttons .twitter-share-button{background:#00ACEE}.share-buttons .g-plusone{background:#DD4B39}.related{overflow:hidden}.related .item{width:33.333%;float:left;margin-top:1em}.related img{float:left;margin-right:.5em;width:75px;height:75px}.related h3{margin-top:0;text-transform:none}.related p{padding-right:.5em}.bubble{background:#4B67A1;color:#fff;padding:0em .5em;display:inline-block;border-radius:5px;position:relative}.bubble a{color:#fff;text-decoration:underline}.bubble:before{position:absolute;width:0;height:0;border:10px solid transparent;left:-15px;bottom:.5em;content:"";border-right-color:#4B67A1}.side{float:right;max-height:500px;max-width:220px;background:#efefef;padding:0 10px;overflow:auto;margin-left:1em}@media screen and (max-width: 550px){.header a.homepage{display:none}}@media screen and (max-width: 480px){.sidebar,.main{float:none;width:auto}.header a.rss{display:none}.header a.logo{position:static;margin:0}.illustration img{width:50px;height:50px}img.illustration{width:75px;height:75px}.item .illustration{width:60px}.tags{display:block}h1{margin-top:0}}@media screen and (max-width: 650px){.related .item{width:auto;float:none}.header .inner{overflow:hidden}.header .logo{margin-left:0;position:static;float:left}}@media screen and (max-width: 900px){div:not(.live) > table td,div:not(.live) > table th,div:not(.live) > table tr,div:not(.live) > table thead,div:not(.live) > table tbody,div:not(.live) > table tfoot,div:not(.live) > table{display:block;border:0 !important;padding:0}div:not(.live) > table th{display:none}div:not(.live) > table td{margin-left:2em}.text td .live{margin-left:0}div:not(.live) > table td:first-child{list-style:square outside;padding-left:0em;display:list-item;margin:.5em 0;margin-left:1em}div:not(.live) > table td:first-child pre{display:inline;white-space:normal}.live{overflow-x:auto;max-width:100%;min-height:2.5em}.live .show-source .web,.live .hide-source .web{display:none}.live .show-source .mobile{display:inline}}@media screen and (max-width: 300px){.search{width:100%}}@media screen and (max-width: 680px){.bubble{display:none}}</style>

<body class=light-blue>
	<script> document.body.className+=' js' </script>
	<div class="content">
		<div class="main" id="main">
			<div id="articles"><div class="text" id="content"><h1>Je čas</h1><p>Všechny stránky v jednom souboru.</p></div></div>
		</div>
			<div class="sidebar" id="clanky">&nbsp;</div>
			<br clear=all />
	</div>
	<div class="header">
		<div class="inner">
			<a class="homepage" href="http://jecas.cz">Online verse</a>
			<a class="logo" href="http://jecas.cz"></a>
		</div>
	</div>
	<div class="footer">
		<p><a class=button href="http://jecas.cz">← zpět na hlavní stranu</a> | Web píše <a href='http://jecas.cz/kontakt' rel="nofollow">Bohumil Jahoda</a>, 2013</p>
	</div>
<script>
var stranky = {
<?php
//SQL connect
define('SQL_HOST', 'localhost');
define('SQL_DBNAME', 'jecas');
define('SQL_USERNAME' ,'root');
define('SQL_PASSWORD', '');

$dsn = 'mysql:dbname='.SQL_DBNAME.';host='.SQL_HOST.'';
$user = SQL_USERNAME;
$password = SQL_PASSWORD;

try {
    $pdo = new PDO($dsn, $user, $password);
} catch (PDOException $e) {
    die('Connection failed: ' . $e->getMessage());
}

$sql = $pdo->prepare("SET NAMES utf8");
$sql->execute();

$sql = $pdo->prepare("SELECT `url_slug`, `title`, `description`, text_html
FROM `pages`
WHERE `status` = '1' -- and text_html not like '%<script>%'
ORDER BY `last_modification` DESC
");

function data_uri($filename) {
	$filename = (preg_match("@^(http://jecas.cz|http)@", $filename)) ? $filename : ("http://jecas.cz" . $filename);
    //$mime = mime_content_type($filename);
    $data = base64_encode(file_get_contents($filename));

    return "data:image/png;base64,$data";
}

function rozbehatScript($text) {
	$text = str_replace(array("<script>", "<\/script>"), array('<scri"+"pt>', '</scr"+"ipt>'), $text);
	return $text;
}

function vycistit($text) {

	$text = preg_replace("~(<a href\=['|\"])/([a-z0-9#-]*)([\"|'])~", "$1javascript:zobrazitStranku('$2')$3", $text);

	$search = '/(<img\s+src=["\'])([^"\']+)(["\']\s+[^>]+>)/';
	$text = preg_replace_callback($search, create_function(
	        '$matches',
	        'return $matches[1] . data_uri($matches[2]) . $matches[3];'
	    ), $text);

	return $text;
}


$sql->execute() or die(print_r($sql->errorInfo(), true));

$zaznamy = $sql->fetchAll();

foreach ($zaznamy as $zaznam) {
	echo '"' . $zaznam["url_slug"] . '" : { nadpis : ' . json_encode(htmlspecialchars($zaznam["title"])) . ', popis: ' . json_encode($zaznam["description"]) . ', obsah : ' . rozbehatScript(json_encode(vycistit($zaznam['text_html']))) . '}, ';
}  	

?>
};


/**
 * Prohazuje třídy
 */
function toggleClass(el, class1, class2) {
	if (el) {
		el.className = el.className == class2 ? class1 : class2;
	}
}

/**
 * Přidá/odebírá třídu
 */  
function toggle(el, cname) {
  if (el.className.match(cname)) {
    el.className = el.className.replace(cname, "");
  }
  else {
    el.className += " " + cname;
  }
}

function insertAndExecute(id, text)
  {
    domelement = document.getElementById(id);
    domelement.innerHTML = text;
    var scripts = [];

    ret = domelement.childNodes;
    for ( var i = 0; ret[i]; i++ ) {
      if ( scripts && nodeName( ret[i], "script" ) && (!ret[i].type || ret[i].type.toLowerCase() === "text/javascript") ) {
            scripts.push( ret[i].parentNode ? ret[i].parentNode.removeChild( ret[i] ) : ret[i] );
        }
    }

    for(script in scripts)
    {
      evalScript(scripts[script]);
    }
  }
  function nodeName( elem, name ) {
    return elem.nodeName && elem.nodeName.toUpperCase() === name.toUpperCase();
  }
  function evalScript( elem ) {
    data = ( elem.text || elem.textContent || elem.innerHTML || "" );

    var head = document.getElementsByTagName("head")[0] || document.documentElement,
    script = document.createElement("script");
    script.type = "text/javascript";
    script.appendChild( document.createTextNode( data ) );
    head.insertBefore( script, head.firstChild );
    head.removeChild( script );

    if ( elem.parentNode ) {
        elem.parentNode.removeChild( elem );
    }
  }

function vsechnyClanky() {
	var vystup = "<h2>Stránky</h2>";
	for (stranka in stranky) {
		vystup += "<h3><a href='javascript:zobrazitStranku(\"" + stranka + "\")'>" + stranky[stranka].nadpis + "</a></h3>";
	};
	document.getElementById("clanky").innerHTML = vystup;
}

function zobrazitStranku(url) {
	if (!stranky[url]) {
		alert("Dostupné pouze online na jecas.cz");
		return;
	}
	document.title = stranky[url].nadpis;
	//document.getElementById('content').innerHTML = "<h1>" + stranky[url].nadpis + "</h1><p>" + stranky[url].popis + "</p>" + stranky[url].obsah;
	insertAndExecute('content', "<h1>" + stranky[url].nadpis + "</h1><p>" + stranky[url].popis + "</p>" + stranky[url].obsah);
	ukazky();
	window.scrollTo(0, 0);
}




/**
 * Ukázky
 */
function ukazky() {
var live = document.getElementsByTagName("div");
var noSource = true;
for (var i = live.length - 1; i >= 0; i--) {
	if (live[i].className == "live") {
    noSource = false;
    var code = document.createElement("code");
    var pre = document.createElement("pre");
    pre.className = "xmp"; 
    code.innerHTML = live[i].innerHTML.replace(/^\n/g, '').replace(/&/g, "&amp;").replace(/</g, "&lt;");
    
    pre.appendChild(code);
		live[i].appendChild(pre);

		var viewSource = document.createElement("button");
		viewSource.innerHTML = "<span class='show-source'><span class='web'>Zobrazit zdroj</span><span class='mobile'>Zdroj</span></span><span class='hide-source'>Skrýt<span class='web'> zdroj</span></span>";
		viewSource.className = "view-source";
		viewSource.onclick = function () {
			toggle(this.parentNode, "show-source");
		}
		live[i].appendChild(viewSource);
	}
};   
}

vsechnyClanky();
</script>